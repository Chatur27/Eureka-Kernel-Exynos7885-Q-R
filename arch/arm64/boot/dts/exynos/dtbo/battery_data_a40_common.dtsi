/*
 * A40 Battery parameters device tree file
 *
 * Copyright (C) 2018 Samsung Electronics, Inc.
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 *
 */

/ {
	fragment@battery {
		target-path = "/";
		__overlay__ {
			battery_params {
				battery,battery_data =
				<
					/***** battery data for 4.35 *****/
					/* battery,battery_table3 */
					7 11 132 10 2 10 143 9 35 9
					186 8 102 8 218 7 169 7 96 7
					249 6 181 6 137 6 103 6 76 6
					55 6 26 6 243 5 188 5 137 5
					73 5 219 1 196 8 87 8 233 7
					124 7 15 7 162 6 53 6 200 5
					91 5 238 4 129 4 20 4 167 3
					58 3 205 2 95 2 242 1 133 1
					24 1 171 0 62 0 217 15

					/* battery,battery_table4 */
					10 10 10 10 10 10 59 60 60 58
					58 58 58 59 60 60 61 63 65 69
					76 160

					/* battery,batcap */
					0x8C 0x2D 0x63 0x0B /* [0x0E] [0x0F] [0x10] [0x11] */

					/* battery,accum */ 
					0x00 0x08 /* [0x44] [0x45] */

					/* battery,soc_arr_val */
					10955 10422 9890 9357 8824 8292 7759 7227 6694 6161
					5629 5096 4563 4031 3498 2965 2432 1900 1367 834
					301 (-192)

					/* battery,ocv_arr_val */
					43782 43146 42510 41949 41419 40907 40496 39813 39576 39219
					38717 38384 38169 38002 37872 37767 37628 37435 37168 36916
					36607 32321

					/* battery,tunning */
					0x00

					/***** battery data for 4.33 *****/
					/* battery,battery_table3 */
					7 11 132 10 2 10 143 9 35 9
					186 8 102 8 218 7 169 7 96 7
					249 6 181 6 137 6 103 6 76 6
					55 6 26 6 243 5 188 5 137 5
					73 5 219 1 188 8 79 8 226 7
					118 7 9 7 156 6 48 6 195 5
					86 5 233 4 125 4 16 4 163 3
					55 3 202 2 93 2 240 1 132 1
					23 1 170 0 62 0 217 15

					/* battery,battery_table4 */
					60 60 60 59 60 60 59 60 60 58
					58 58 58 59 60 60 61 63 65 69
					76 160

					/* battery,batcap */
					0x50 0x2D 0x54 0x0B /* [0x0E] [0x0F] [0x10] [0x11] */
					/* battery,accum */
					0x00 0x8 /* [0x44] [0x45] */

					/* battery,soc_arr_val */
					10917 10386 9855 9324 8793 8263 7732 7201 6670 6140
					5609 5078 4547 4017 3486 2955 2424 1893 1362 831
					300 (-191)

					/* battery,ocv_arr_val */
					43782 43146 42510 41949 41419 40907 40496 39813 39576 39219
					38717 38384 38169 38002 37872 37767 37628 37435 37168 36916
					36607 32321

					/* battery,tunning */
					0x00

					/***** battery data for 4.31 *****/
					/* battery,battery_table3 */
					7 11 132 10 2 10 143 9 35 9
					186 8 102 8 218 7 169 7 96 7
					249 6 181 6 137 6 103 6 76 6
					55 6 26 6 243 5 188 5 137 5
					73 5 219 1 220 8 109 8 255 7
					145 7 35 7 180 6 70 6 216 5
					106 5 251 4 141 4 31 4 177 3
					66 3 212 2 102 2 248 1 137 1
					27 1 173 0 62 0 216 15

					/* battery,battery_table4 */
					60 60 60 59 60 60 59 60 60 58
					58 58 58 59 60 60 61 63 65 69
					76 160

					/* battery,batcap */
					0x88 0x2C 0x22 0x0B /* [0x0E] [0x0F] [0x10] [0x11] */
					/* battery,accum */
					0x00 0x8 /* [0x44] [0x45] */

					/* battery,soc_arr_val */
					11072 10534 9995 9457 8919 8380 7842 7304 6766 6227
					5689 5151 4612 4074 3536 2997 2458 1920 1382 843
					305 (-194)
					

					/* battery,ocv_arr_val */
					43782 43146 42510 41949 41419 40907 40496 39813 39576 39219
					38717 38384 38169 38002 37872 37767 37628 37435 37168 36916
					36607 32321

					/* battery,tunning */
					0x00

					/***** battery data for 4.29 *****/
					/* battery,battery_table3 */
					7 11 132 10 2 10 143 9 35 9
					186 8 102 8 218 7 169 7 96 7
					249 6 181 6 137 6 103 6 76 6
					55 6 26 6 243 5 188 5 137 5
					73 5 219 1 5 9 148 8 36 8
					180 7 68 7 212 6 99 6 243 5
					131 5 19 5 162 4 50 4 194 3
					82 3 225 2 113 2 1 2 144 1
					32 1 176 0 64 0 215 15

					/* battery,battery_table4 */
					60 60 60 59 60 60 59 60 60 58
					58 58 58 59 60 60 61 63 65 69
					76 160

					/* battery,batcap */
					0xC0 0x2B 0xF0 0x0A /* [0x0E] [0x0F] [0x10] [0x11] */
					/* battery,accum */
					0x00 0x8 /* [0x44] [0x45] */

					/* battery,soc_arr_val */
					11273 10725 10177 9629 9080 8532 7984 7436 6888 6340
					5792 5244 4696 4148 3600 3051 2503 1955 1407 858
					310 (-197)

					/* battery,ocv_arr_val */
					43782 43146 42510 41949 41419 40907 40496 39813 39576 39219
					38717 38384 38169 38002 37872 37767 37628 37435 37168 36916
					36607 32321

					/* battery,tunning */
					0x00

					/***** battery data for 4.24 *****/
					/* battery,battery_table3 */
					7 11 132 10 2 10 143 9 35 9
					186 8 102 8 218 7 169 7 96 7
					249 6 181 6 137 6 103 6 76 6
					55 6 26 6 243 5 188 5 137 5
					73 5 219 1 119 9 1 9 139 8
					22 8 160 7 42 7 180 6 62 6
					201 5 83 5 221 4 103 4 241 3
					124 3 6 3 144 2 26 2 164 1
					46 1 185 0 67 0 213 15

					/* battery,battery_table4 */
					60 60 60 59 60 60 59 60 60 58
					58 58 58 59 60 60 61 63 65 69
					76 160

					/* battery,batcap */
					0x30 0x2A 0x8C 0x0A /* [0x0E] [0x0F] [0x10] [0x11] */
					/* battery,accum */
					0x00 0x8 /* [0x44] [0x45] */

					/* battery,soc_arr_val */
					11830 11255 10680 10105 9530 8955 8379 7804 7229 6654
					6079 5503 4928 4353 3778 3202 2627 2052 1476 901
					325 (-207)
					/* battery,ocv_arr_val */
					43782 43146 42510 41949 41419 40907 40496 39813 39576 39219
					38717 38384 38169 38002 37872 37767 37628 37435 37168 36916
					36607 32321

					/* battery,tunning */
					0x00

					>;
					battery,data_ver = <0x04>;
			};

			pdic-manager {
				/* sink */
				pdic,max_power = <5000>;
				pdic,op_power = <2500>;
				pdic,max_voltage = <6000>;
				pdic,max_current = <2000>;
				pdic,min_current = <500>;

				pdic,giveback = <0>;
				pdic,usb_com_capable = <1>;
				pdic,no_usb_suspend = <1>;

				/* source */
				source,max_voltage = <5000>;
				source,min_voltage = <4000>;
				source,max_power = <2500>;

				/* sink cap */
				sink,capable_max_voltage = <9000>;
			};

			battery {
				status = "okay";
				compatible = "samsung,sec-battery";

				pinctrl-names = "default";

				battery,vendor = "Battery";
				battery,charger_name = "s2mu106-charger";
				battery,fuelgauge_name = "s2mu106-fuelgauge";
				battery,technology = <2>; /* POWER_SUPPLY_TECHNOLOGY_LION */
				battery,fgsrc_switch_name = "s2mu106-fuelgauge"; /* Fuelgauge voltage source */

				battery,chip_vendor = "LSI";
				battery,temp_adc_type = <1>; /* SEC_BATTERY_ADC_TYPE_AP */

				battery,temp_check_type = <2>; /* SEC_BATTERY_TEMP_CHECK_TEMP */
				battery,chg_temp_check = <1>;

				battery,thermal_source = <2>; /* SEC_BATTERY_THERMAL_SOURCE_ADC */
				battery,chg_thermal_source = <2>; /* SEC_CHARGER_THERMAL_SOURCE_FG */

				battery,polling_time = <10 30 30 30 3600>;

				battery,temp_table_adc = <
							319 431 470 686 726 743 827 852 908 967 
							1035 1091 1157 1217 1400 1612 1824 2057 2301 2536 
							2755 2831 2959 3012 3102 3154 3176 3229 3284 3371 
							3440 3559 3676
							>;
				battery,temp_table_data = <
							900 800 750 650 620 600 580 570 550 530
							510 490 470 450 400 350 300 250 200 150
							100 80 50 30 10 0 (-10) (-30) (-50) (-70)
							(-100) (-150) (-200)
							>;

				battery,inbat_voltage = <1>;

				battery,inbat_voltage_table_adc = <
								2766 2755 2728 2698 2678 2649 2620 2598 2562 2532
								2508 2475 2448 2429 2401 2370 2348 2318 2288 2258
								>;
				battery,inbat_voltage_table_data = <
								4350 4300 4250 4200 4150 4100 4050 4000 3950 3900
								3850 3800 3750 3700 3650 3600 3550 3500 3450 3400
								>;

				battery,adc_check_count = <5>;

				battery,cable_check_type = <4>; /* SEC_BATTERY_CABLE_CHECK_PSY */
				battery,cable_source_type = <1>; /* SEC_BATTERY_CABLE_SOURCE_EXTERNAL */
				battery,polling_type = <1>; /* SEC_BATTERY_MONITOR_ALARM */
				battery,monitor_initial_count = <0>;

				battery,pre_afc_input_current = <500>;

				battery,battery_check_type = <0>; /* SEC_BATTERY_CHECK_NONE */
				battery,check_count = <0>;

				battery,ovp_uvlo_check_type = <3>; /* SEC_BATTERY_OVP_UVLO_CHGPOLLING */

				battery,temp_check_count = <1>;
				battery,temp_highlimit_threshold_event = <800>;
				battery,temp_highlimit_recovery_event = <750>;
				battery,temp_high_threshold_event = <500>;
				battery,temp_high_recovery_event = <480>;
				battery,temp_low_threshold_event = <0>;
				battery,temp_low_recovery_event = <20>;
				battery,temp_highlimit_threshold_normal = <800>;
				battery,temp_highlimit_recovery_normal = <750>;
				battery,temp_high_threshold_normal = <500>;
				battery,temp_high_recovery_normal = <480>;
				battery,temp_low_threshold_normal = <0>;
				battery,temp_low_recovery_normal = <20>;
				battery,temp_highlimit_threshold_lpm = <800>;
				battery,temp_highlimit_recovery_lpm = <750>;
				battery,temp_high_threshold_lpm = <500>;
				battery,temp_high_recovery_lpm = <480>;
				battery,temp_low_threshold_lpm = <0>;
				battery,temp_low_recovery_lpm = <20>;
				battery,wpc_high_threshold_normal = <450>;
				battery,wpc_high_recovery_normal = <400>;
				battery,wpc_low_threshold_normal = <0>;
				battery,wpc_low_recovery_normal = <50>;

				battery,full_check_type = <2>; /* SEC_BATTERY_FULLCHARGED_FG_CURRENT */
				battery,full_check_type_2nd = <2>; /* SEC_BATTERY_FULLCHARGED_FG_CURRENT */
				battery,full_check_count = <1>;
				battery,chg_gpio_full_check = <0>;
				battery,chg_polarity_full_check = <1>;

				battery,chg_heating_prevention_method = <1>; /* SEC_BATTERY_BY_CHANGING_CURRENT */
				battery,chg_high_temp = <460>;
				battery,chg_high_temp_recovery = <440>;
				battery,chg_input_limit_current = <1000>;
				battery,chg_charging_limit_current = <1250>;

				battery,mix_high_temp = <420>;
				battery,mix_high_chg_temp = <500>;
				battery,mix_high_temp_recovery = <390>;

				/* SEC_BATTERY_FULL_CONDITION_SOC |
				 * SEC_BATTERY_FULL_CONDITION_NOTIMEFULL |
				 * SEC_BATTERY_FULL_CONDITION_VCELL
				 */
				battery,full_condition_type = <13>;
				battery,full_condition_soc = <93>;
				battery,full_condition_vcell = <4250>;

				battery,recharge_check_count = <1>;
				battery,recharge_condition_type = <4>; /* SEC_BATTERY_RECHARGE_CONDITION_VCELL */
				battery,recharge_condition_soc = <98>;
				battery,recharge_condition_vcell = <4280>;

				battery,charging_total_time = <14400>;
				battery,hv_charging_total_time = <10800>;
				battery,normal_charging_total_time = <18000>;
				battery,usb_charging_total_time = <36000>;
				battery,recharging_total_time = <5400>;
				battery,charging_reset_time = <0>;

				battery,chg_float_voltage = <4350>;

				battery,swelling_high_temp_block = <410>;
				battery,swelling_high_temp_recov = <390>;
				battery,swelling_wc_high_temp_recov = <390>;
				battery,swelling_low_temp_block_1st = <150>;
				battery,swelling_low_temp_recov_1st = <170>;
				battery,swelling_low_temp_block_2nd = <50>;
				battery,swelling_low_temp_recov_2nd = <70>;

				battery,swelling_low_temp_current = <700>;	/* 0.3C */
				battery,swelling_low_temp_current_2nd = <300>;	/* 0.1C */ 
				battery,swelling_low_temp_topoff = <175>;	/* 0.05C */
				battery,swelling_high_temp_current = <1050>;	/* 0.45C */
				battery,swelling_high_temp_topoff = <175>;	/* 0.05C */
				battery,swelling_wc_high_temp_current = <750>;	/* 0.3C */
				battery,swelling_wc_low_temp_current = <750>;	/* 0.3C */

				battery,swelling_drop_float_voltage = <4150>;
				battery,swelling_high_rechg_voltage = <4000>;
				battery,swelling_low_rechg_voltage = <4000>;

				battery,siop_event_check_type = <1>;
				battery,siop_call_cv_current = <330>;
				battery,siop_call_cc_current = <330>;

				battery,siop_input_limit_current = <1200>;
				battery,siop_charging_limit_current = <1000>;
				battery,siop_hv_input_limit_current = <700>;
				battery,siop_hv_charging_limit_current = <1000>;
				battery,input_current_by_siop_20 = <550>;

				battery,pd_charging_charge_power = <15000>;
				battery,max_charging_current = <2400>;
				battery,battery_full_capacity = <3100>;

				/* cycle, chg_float_voltage, recharge_condition_vcell, full_condition_vcell, full_condition_soc, step_charging_condition */
				battery,age_data = <0 4350 4280 4250 93	4150 /*4.35*/
						300 4330 4260 4230 92 4150	/*4.33*/
						400 4310 4240 4210 91 4150	/*4.31*/
						700 4290 4220 4190 90 4150	/*4.29*/
						1000 4240 4170 4140 89 4150	/*4.24*/
						>;
	
				/* step charging option */
				battery,step_charging_type = <0x0F>;
				battery,step_charging_charge_power = <12000>;
				battery,step_charging_condition = <4150 4350>;
				battery,step_charging_condition_curr = <2150 2150>;
				battery,step_charging_current = <2400 2150>;
				battery,step_charging_float_voltage = <4150 4350>;

				battery,max_input_voltage = <9000>; /* mV */
				battery,max_input_current = <3000>;  /* mA */

				battery,standard_curr = <2150>;
				battery,expired_time = <9600>; /* 100 + 60 minutes */
				battery,recharging_expired_time = <5400>;

				battery,cisd_max_voltage_thr = <5000>; /* battery ovp detection voltage */

				battery,prepare_afc_delay = <0>;

				battery,cisd_alg_index = <7>;
				battery,lowtemp_support_full_volt;
				battery,enable_water_resistance;

				io-channels = <&exynos_adc 1>, <&exynos_adc 2>;
				io-channel-names = "adc-temp", "adc-in-bat";
				#io-channel-cells = <5>;
				io-channel-ranges;

				battery,ttf_hv_charge_current = <2230>;
				battery,ttf_capacity = <2790>;
				battery,cv_data = <
							2107	796	2153
							2084	801	2132
							1963	811	2081
							1870	821	2029
							1781	831	1967
							1691	841	1916
							1599	850	1854
							1484	861	1782
							1396	870	1721
							1293	880	1638
							1191	890	1556
							1102	900	1474
							997	910	1371
							875	920	1258
							772	930	1134
							679	940	1001
							565	950	836
							467	961	642
							442	970	590
							426	980	518
							402	990	456
							388	995	415
							292	1000	0
							>;
			};

/* sec_battery_cable
 *   0	UNKNOWN,
 *   1	NONE,
 *   2	PREPARE_TA,
 *   3	TA,
 *   4	USB,
 *   5	USB_CDP,
 *   6	9V_TA,
 *   7	9V_ERR,
 *   8	9V_UNKNOWN,
 *   9	12V_TA,
 *  10	WIRELESS,
 *  11	HV_WIRELESS,
 *  12	PMA_WIRELESS,
 *  13	WIRELESS_PACK,
 *  14	WIRELESS_PACK_TA,
 *  15	WIRELESS_STAND,
 *  16	WIRELESS_HV_STAND,
 *  17	QC20,
 *  18	QC30,
 *  19	PDIC,
 *  20	UARTOFF,
 *  21	OTG,
 *  22	LAN_HUB,
 *  23	POWER_SHARING,
 *  24	HMT_CONNECTED,
 *  25	HMT_CHARGE,
 *  26	HV_TA_CHG_LIMIT,
 *  27	WIRELESS_VEHICLE,
 *  28	WIRELESS_HV_VEHICLE,
 *  29	PREPARE_WIRELESS_HV,
 *  30	TIMEOUT,
 *  31	SMART_OTG,
 *  32	SMART_NOTG,
 *  33	FACTORY_UART,
 *  34	CABLE_MAX,
 */
			cable-info {
				default_input_current = <1800>;
				default_charging_current = <2100>;
				full_check_current_1st = <300>;
				full_check_current_2nd = <175>;

				current_group_1 {
					cable_number = <1 4 19 21 22 23 30>;
					input_current = <500>;
					charging_current = <500>;
				};

				current_group_2 {
					cable_number = <2 25 31>;
					input_current = <1000>;
					charging_current = <1000>;
				};

				current_group_3 {
					cable_number = <5 32>;
					input_current = <1500>;
					charging_current = <1500>;
				};

				current_group_4 {
					cable_number = <6 7 8>;
					input_current = <1650>;
					charging_current = <2400>;
				};

				current_group_5 {
					cable_number = <9>;
					input_current = <1650>;
					charging_current = <2400>;
				};

				current_group_6 {
					cable_number = <10 12 14 15 27>;
					input_current = <900>;
					charging_current = <1200>;
				};

				current_group_7 {
					cable_number = <13>;
					input_current = <700>;
					charging_current = <1200>;
				};

				current_group_8 {
					cable_number = <24>;
					input_current = <1000>;
					charging_current = <450>;
				};

				current_group_9 {
					cable_number = <26>;
					input_current = <2000>;
					charging_current = <1800>;
				};

				current_group_10 {
					cable_number = <11 16 28>;
					input_current = <650>;
					charging_current = <1200>;
				};

				current_group_11 {
					cable_number = <29>;
					input_current = <500>;
					charging_current = <1200>;
				};
			};

			s2mu106-charger {
				status = "disable";
				compatible = "samsung,s2mu106-charger";
			};
		};
	};
};

&pinctrl_0 {
	fuel_irq: fuel-irq {
		samsung,pins = "gpa2-4";
		samsung,pin-function = <0>;
		samsung,pin-pud = <2>;
		samsung,pin-drv = <0>;
	};

	if_pmic_irq: if-pmic-irq {
		samsung,pins = "gpa2-2";
		samsung,pin-function = <0>;
		samsung,pin-pud = <0>;
		samsung,pin-drv = <0>;
	};

	usbpd_irq: usbpd-irq {
		samsung,pins = "gpa2-3";
		samsung,pin-function = <0x0f>;
		samsung,pin-pud = <0>;
		samsung,pin-drv = <0>;
	};
};

&i2c_0 {
	i2c-gpio,delay-us = <5>;
	status = "okay";
	s2mu106-fuelgauge@3B {
		compatible = "samsung,s2mu106-fuelgauge";
		reg = <0x3B>;
		pinctrl-names = "default";
		pinctrl-0 = <&fuel_irq>;
		fuelgauge,fuel_int = <&gpa2 4 0>;
		fuelgauge,fuel_alert_soc = <1>;
		fuelgauge,fuel_alert_vol = <3300>;
		fuelgauge,low_temp_limit = <100>;
		fuelgauge,sw_vbat_l_recovery_vol = <3465>;
		fuelgauge,capacity_max = <970>;
		fuelgauge,capacity_max_margin = <200>;
		fuelgauge,capacity_min = <0>;
		fuelgauge,capacity_calculation_type = <28>;
		fuelgauge,capacity_full = <3100>;
		fuelgauge,type_str = "SDI";
		fuelgauge,fg_log_enable = <1>;
	};

	usbpd-s2mu106@3C {
		compatible = "sec-usbpd,i2c";
		reg = <0x3C>;
		pinctrl-names = "default";
		pinctrl-0     = <&usbpd_irq>;
		usbpd,usbpd_int = <&gpa2 3 0>;
	};
};
